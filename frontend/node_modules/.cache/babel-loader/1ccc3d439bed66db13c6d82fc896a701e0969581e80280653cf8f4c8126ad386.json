{"ast":null,"code":"import _objectSpread from\"/Users/stalin_j/Downloads/test2/onboard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{format}from\"date-fns\";import{FaArrowLeft}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeeLeaveRequest=()=>{var _leaveTypes$find,_leaveTypes$find2,_leaveTypes$find3,_leaveTypes$find4,_leaveTypes$find5;const{token}=useAuth();const navigate=useNavigate();const[leaveTypes,setLeaveTypes]=useState([]);const[systemSettings,setSystemSettings]=useState(null);const[leaveBalance,setLeaveBalance]=useState(null);const[leaveTypeBalances,setLeaveTypeBalances]=useState([]);const[compOffBalance,setCompOffBalance]=useState(null);const[myRequests,setMyRequests]=useState([]);const[loading,setLoading]=useState(false);const[message,setMessage]=useState(\"\");const[formData,setFormData]=useState({leaveType:\"\",fromDate:\"\",toDate:\"\",halfDay:false,reason:\"\"});useEffect(()=>{fetchLeaveTypes();fetchSystemSettings();if(token){fetchLeaveBalance();fetchLeaveTypeBalances();fetchMyRequests();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[token]);const fetchLeaveTypes=async()=>{try{const response=await axios.get(\"/leave/types\");setLeaveTypes(response.data);}catch(error){console.error(\"Error fetching leave types:\",error);}};const fetchSystemSettings=async()=>{try{// For employees, we can fetch basic system settings without auth if needed\n// Or we can make a public endpoint for basic settings\nconst response=await axios.get(\"/leave/system-info\");setSystemSettings(response.data);}catch(error){console.error(\"Error fetching system settings:\",error);// Set default values if API fails\nsetSystemSettings({allow_half_day:true,total_annual_leaves:15});}};const fetchLeaveBalance=async()=>{try{if(!token){console.error(\"No token available\");return;}const response=await axios.get(\"/leave/balance\",{headers:{Authorization:\"Bearer \".concat(token)}});setLeaveBalance(response.data);}catch(error){console.error(\"Error fetching leave balance:\",error);// Set default values if fetch fails\nsetLeaveBalance({total_allocated:15,leaves_taken:0,leaves_remaining:15,year:new Date().getFullYear()});}};const fetchLeaveTypeBalances=async()=>{try{if(!token){console.error(\"No token available\");return;}const response=await axios.get(\"/leave/my-leave-type-balances\",{headers:{Authorization:\"Bearer \".concat(token)}});setLeaveTypeBalances(response.data.leaveTypeBalances||[]);}catch(error){console.error(\"Error fetching leave type balances:\",error);// Set default values if fetch fails\nsetLeaveTypeBalances([{leave_type:\"Earned/Annual Leave\",total_allocated:15,leaves_taken:0,leaves_remaining:15},{leave_type:\"Sick Leave\",total_allocated:6,leaves_taken:0,leaves_remaining:6},{leave_type:\"Casual Leave\",total_allocated:6,leaves_taken:0,leaves_remaining:6}]);}};const fetchMyRequests=async()=>{try{if(!token){console.error(\"No token available\");return;}const response=await axios.get(\"/leave/my-requests\",{headers:{Authorization:\"Bearer \".concat(token)}});setMyRequests(response.data);}catch(error){console.error(\"Error fetching my requests:\",error);}};const handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type===\"checkbox\"?checked:value}));};const calculateTotalDays=()=>{if(!formData.fromDate)return 0;// If no toDate is provided, it's a single day leave\nif(!formData.toDate){return formData.halfDay?0.5:1;}const start=new Date(formData.fromDate);const end=new Date(formData.toDate);const diffTime=Math.abs(end-start);const diffDays=Math.ceil(diffTime/(1000*60*60*24))+1;return formData.halfDay?diffDays-0.5:diffDays;};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage(\"\");try{const totalDays=calculateTotalDays();if(!leaveBalance){setMessage(\"Please wait while we load your leave balance...\");setLoading(false);return;}// Validate based on leave type\nif(formData.leaveType===\"Unpaid Leave\"){// Unpaid Leave: No balance validation needed\nconsole.log(\"ðŸ” Unpaid Leave - No balance validation required\");}else if(formData.leaveType===\"Comp Off\"){// Comp Off: Check Comp Off balance (we'll need to implement this)\nconsole.log(\"ðŸ” Comp Off - Comp Off balance validation needed\");// For now, allow Comp Off requests (balance will be checked on approval)\n}else{// Paid Leave, Privilege Leave, Sick Leave, etc.: Check annual leave balance\nif(totalDays>leaveBalance.leaves_remaining){setMessage(\"Insufficient leave balance. You have \".concat(leaveBalance.leaves_remaining,\" days remaining, but requesting \").concat(totalDays,\" days.\"));setLoading(false);return;}}const requestData=_objectSpread(_objectSpread({},formData),{},{toDate:formData.toDate||null,totalDays});console.log(\"ðŸ” Frontend - Data being sent:\",requestData);console.log(\"ðŸ” Frontend - Token available:\",!!token);await axios.post(\"/leave/submit\",requestData,{headers:{Authorization:\"Bearer \".concat(token)},timeout:15000// 15 second timeout for leave submission\n});setMessage(\"Leave request submitted successfully!\");setFormData({leaveType:\"\",fromDate:\"\",toDate:\"\",halfDay:false,reason:\"\"});// Refresh data\nfetchLeaveBalance();fetchMyRequests();}catch(error){var _error$response,_error$response$data;console.error(\"Error submitting leave request:\",error);setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||\"Failed to submit leave request\");}finally{setLoading(false);}};const getStatusColor=status=>{switch(status){case\"Approved\":return\"text-green-600 bg-green-100\";case\"Rejected\":return\"text-red-600 bg-red-100\";case\"manager_approved\":return\"text-blue-600 bg-blue-100\";case\"pending_manager_approval\":return\"text-yellow-600 bg-yellow-100\";default:return\"text-gray-600 bg-gray-100\";}};const formatDate=dateString=>{if(!dateString)return\"-\";try{return format(new Date(dateString),\"MMM dd, yyyy\");}catch(error){console.error(\"Error formatting date:\",dateString,error);return\"-\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"flex items-center text-gray-600 hover:text-gray-800 transition-colors duration-200 mr-4\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{className:\"w-4 h-4 mr-2\"}),\"Back\"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Leave Request Form\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:leaveBalance?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-4\",children:\"Your Leave Balance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:leaveBalance.total_allocated}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-600\",children:\"Total Allocated\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-orange-600\",children:leaveBalance.leaves_taken}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-orange-600\",children:\"Leaves Taken\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:leaveBalance.leaves_remaining}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-600\",children:\"Remaining\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-blue-700 mb-3\",children:\"Leave Type Breakdown:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:leaveTypeBalances.map((balance,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 border border-blue-100\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-semibold text-blue-800 mb-2\",children:balance.leave_type}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Allocated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-blue-600\",children:balance.total_allocated})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Taken:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-orange-600\",children:balance.leaves_taken})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Remaining:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:balance.leaves_remaining})]})]})]},index))})]})]}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-6\",children:\"Submit Leave Request\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Leave Type *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"leaveType\",value:formData.leaveType,onChange:handleInputChange,required:true,disabled:leaveTypes.length===0,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:leaveTypes.length===0?\"Loading leave types...\":\"Select Leave Type\"}),leaveTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type.type_name,children:type.type_name},type.id))]}),formData.leaveType&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[((_leaveTypes$find=leaveTypes.find(t=>t.type_name===formData.leaveType))===null||_leaveTypes$find===void 0?void 0:_leaveTypes$find.color)&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full mr-2\",style:{backgroundColor:(_leaveTypes$find2=leaveTypes.find(t=>t.type_name===formData.leaveType))===null||_leaveTypes$find2===void 0?void 0:_leaveTypes$find2.color}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:(_leaveTypes$find3=leaveTypes.find(t=>t.type_name===formData.leaveType))===null||_leaveTypes$find3===void 0?void 0:_leaveTypes$find3.description})]}),((_leaveTypes$find4=leaveTypes.find(t=>t.type_name===formData.leaveType))===null||_leaveTypes$find4===void 0?void 0:_leaveTypes$find4.max_days)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded\",children:[\"Maximum allowed:\",\" \",(_leaveTypes$find5=leaveTypes.find(t=>t.type_name===formData.leaveType))===null||_leaveTypes$find5===void 0?void 0:_leaveTypes$find5.max_days,\" \",\"days per year\"]})]})]}),(systemSettings===null||systemSettings===void 0?void 0:systemSettings.allow_half_day)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Half Day\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"halfDay\",checked:formData.halfDay,onChange:handleInputChange,className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-2 text-sm text-gray-700\",children:\"Check if this is a half-day leave\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"From Date *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"fromDate\",value:formData.fromDate,onChange:handleInputChange,required:true,min:new Date().toISOString().split(\"T\")[0],className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"To Date (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"toDate\",value:formData.toDate,onChange:handleInputChange,min:formData.fromDate||new Date().toISOString().split(\"T\")[0],className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Leave empty for single day leave\"})]})]}),formData.fromDate&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Leave Days:\"}),\" \",calculateTotalDays(),\" \",calculateTotalDays()===1?\"day\":\"days\",formData.halfDay&&\" (including half-day adjustment)\",!formData.toDate&&\" - Single day leave\"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Reason *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reason\",value:formData.reason,onChange:handleInputChange,required:true,rows:4,placeholder:\"Please provide a detailed reason for your leave request...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 rounded-lg \".concat(message.includes(\"successfully\")?\"bg-green-100 text-green-700 border border-green-200\":\"bg-red-100 text-red-700 border border-red-200\"),children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\",children:loading?\"Submitting...\":\"Submit Leave Request\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"My Leave Requests\"}),myRequests.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"No leave requests found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"From\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Days\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Manager\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Submitted\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:myRequests.map(request=>{var _leaveTypes$find6,_leaveTypes$find7;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[((_leaveTypes$find6=leaveTypes.find(t=>t.type_name===request.leave_type))===null||_leaveTypes$find6===void 0?void 0:_leaveTypes$find6.color)&&/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full mr-2\",style:{backgroundColor:(_leaveTypes$find7=leaveTypes.find(t=>t.type_name===request.leave_type))===null||_leaveTypes$find7===void 0?void 0:_leaveTypes$find7.color}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:request.leave_type})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatDate(request.from_date)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:request.to_date?formatDate(request.to_date):\"-\"}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:[request.total_leave_days,request.half_day&&\" (Â½ day)\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[request.manager1_name&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800\",children:request.manager1_name}),request.manager2_name&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\",children:request.manager2_name}),request.manager3_name&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800\",children:request.manager3_name}),!request.manager1_name&&!request.manager2_name&&!request.manager3_name&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-600\",children:\"Not Assigned\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getStatusColor(request.status)),children:request.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:formatDate(request.created_at)})]},request.id);})})]})})]})]});};export default EmployeeLeaveRequest;","map":{"version":3,"names":["React","useState","useEffect","useAuth","useNavigate","axios","format","FaArrowLeft","jsx","_jsx","jsxs","_jsxs","EmployeeLeaveRequest","_leaveTypes$find","_leaveTypes$find2","_leaveTypes$find3","_leaveTypes$find4","_leaveTypes$find5","token","navigate","leaveTypes","setLeaveTypes","systemSettings","setSystemSettings","leaveBalance","setLeaveBalance","leaveTypeBalances","setLeaveTypeBalances","compOffBalance","setCompOffBalance","myRequests","setMyRequests","loading","setLoading","message","setMessage","formData","setFormData","leaveType","fromDate","toDate","halfDay","reason","fetchLeaveTypes","fetchSystemSettings","fetchLeaveBalance","fetchLeaveTypeBalances","fetchMyRequests","response","get","data","error","console","allow_half_day","total_annual_leaves","headers","Authorization","concat","total_allocated","leaves_taken","leaves_remaining","year","Date","getFullYear","leave_type","handleInputChange","e","name","value","type","checked","target","prev","_objectSpread","calculateTotalDays","start","end","diffTime","Math","abs","diffDays","ceil","handleSubmit","preventDefault","totalDays","log","requestData","post","timeout","_error$response","_error$response$data","getStatusColor","status","formatDate","dateString","className","children","onClick","map","balance","index","onSubmit","onChange","required","disabled","length","type_name","id","find","t","color","style","backgroundColor","description","max_days","min","toISOString","split","rows","placeholder","includes","request","_leaveTypes$find6","_leaveTypes$find7","from_date","to_date","total_leave_days","half_day","manager1_name","manager2_name","manager3_name","created_at"],"sources":["/Users/stalin_j/Downloads/test2/onboard/frontend/src/components/EmployeeLeaveRequest.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { format } from \"date-fns\";\nimport { FaArrowLeft } from \"react-icons/fa\";\n\nconst EmployeeLeaveRequest = () => {\n  const { token } = useAuth();\n  const navigate = useNavigate();\n  const [leaveTypes, setLeaveTypes] = useState([]);\n  const [systemSettings, setSystemSettings] = useState(null);\n  const [leaveBalance, setLeaveBalance] = useState(null);\n  const [leaveTypeBalances, setLeaveTypeBalances] = useState([]);\n  const [compOffBalance, setCompOffBalance] = useState(null);\n  const [myRequests, setMyRequests] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    leaveType: \"\",\n    fromDate: \"\",\n    toDate: \"\",\n    halfDay: false,\n    reason: \"\",\n  });\n\n  useEffect(() => {\n    fetchLeaveTypes();\n    fetchSystemSettings();\n    if (token) {\n      fetchLeaveBalance();\n      fetchLeaveTypeBalances();\n      fetchMyRequests();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n\n  const fetchLeaveTypes = async () => {\n    try {\n      const response = await axios.get(\"/leave/types\");\n      setLeaveTypes(response.data);\n    } catch (error) {\n      console.error(\"Error fetching leave types:\", error);\n    }\n  };\n\n  const fetchSystemSettings = async () => {\n    try {\n      // For employees, we can fetch basic system settings without auth if needed\n      // Or we can make a public endpoint for basic settings\n      const response = await axios.get(\"/leave/system-info\");\n      setSystemSettings(response.data);\n    } catch (error) {\n      console.error(\"Error fetching system settings:\", error);\n      // Set default values if API fails\n      setSystemSettings({\n        allow_half_day: true,\n        total_annual_leaves: 15,\n      });\n    }\n  };\n\n  const fetchLeaveBalance = async () => {\n    try {\n      if (!token) {\n        console.error(\"No token available\");\n        return;\n      }\n\n      const response = await axios.get(\"/leave/balance\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setLeaveBalance(response.data);\n    } catch (error) {\n      console.error(\"Error fetching leave balance:\", error);\n      // Set default values if fetch fails\n      setLeaveBalance({\n        total_allocated: 15,\n        leaves_taken: 0,\n        leaves_remaining: 15,\n        year: new Date().getFullYear(),\n      });\n    }\n  };\n\n  const fetchLeaveTypeBalances = async () => {\n    try {\n      if (!token) {\n        console.error(\"No token available\");\n        return;\n      }\n\n      const response = await axios.get(\"/leave/my-leave-type-balances\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setLeaveTypeBalances(response.data.leaveTypeBalances || []);\n    } catch (error) {\n      console.error(\"Error fetching leave type balances:\", error);\n      // Set default values if fetch fails\n      setLeaveTypeBalances([\n        {\n          leave_type: \"Earned/Annual Leave\",\n          total_allocated: 15,\n          leaves_taken: 0,\n          leaves_remaining: 15,\n        },\n        {\n          leave_type: \"Sick Leave\",\n          total_allocated: 6,\n          leaves_taken: 0,\n          leaves_remaining: 6,\n        },\n        {\n          leave_type: \"Casual Leave\",\n          total_allocated: 6,\n          leaves_taken: 0,\n          leaves_remaining: 6,\n        },\n      ]);\n    }\n  };\n\n  const fetchMyRequests = async () => {\n    try {\n      if (!token) {\n        console.error(\"No token available\");\n        return;\n      }\n\n      const response = await axios.get(\"/leave/my-requests\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setMyRequests(response.data);\n    } catch (error) {\n      console.error(\"Error fetching my requests:\", error);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: type === \"checkbox\" ? checked : value,\n    }));\n  };\n\n  const calculateTotalDays = () => {\n    if (!formData.fromDate) return 0;\n\n    // If no toDate is provided, it's a single day leave\n    if (!formData.toDate) {\n      return formData.halfDay ? 0.5 : 1;\n    }\n\n    const start = new Date(formData.fromDate);\n    const end = new Date(formData.toDate);\n    const diffTime = Math.abs(end - start);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n\n    return formData.halfDay ? diffDays - 0.5 : diffDays;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      const totalDays = calculateTotalDays();\n\n      if (!leaveBalance) {\n        setMessage(\"Please wait while we load your leave balance...\");\n        setLoading(false);\n        return;\n      }\n\n      // Validate based on leave type\n      if (formData.leaveType === \"Unpaid Leave\") {\n        // Unpaid Leave: No balance validation needed\n        console.log(\"ðŸ” Unpaid Leave - No balance validation required\");\n      } else if (formData.leaveType === \"Comp Off\") {\n        // Comp Off: Check Comp Off balance (we'll need to implement this)\n        console.log(\"ðŸ” Comp Off - Comp Off balance validation needed\");\n        // For now, allow Comp Off requests (balance will be checked on approval)\n      } else {\n        // Paid Leave, Privilege Leave, Sick Leave, etc.: Check annual leave balance\n        if (totalDays > leaveBalance.leaves_remaining) {\n          setMessage(\n            `Insufficient leave balance. You have ${leaveBalance.leaves_remaining} days remaining, but requesting ${totalDays} days.`\n          );\n          setLoading(false);\n          return;\n        }\n      }\n\n      const requestData = {\n        ...formData,\n        toDate: formData.toDate || null,\n        totalDays,\n      };\n\n      console.log(\"ðŸ” Frontend - Data being sent:\", requestData);\n      console.log(\"ðŸ” Frontend - Token available:\", !!token);\n\n      await axios.post(\"/leave/submit\", requestData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        timeout: 15000, // 15 second timeout for leave submission\n      });\n\n      setMessage(\"Leave request submitted successfully!\");\n      setFormData({\n        leaveType: \"\",\n        fromDate: \"\",\n        toDate: \"\",\n        halfDay: false,\n        reason: \"\",\n      });\n\n      // Refresh data\n      fetchLeaveBalance();\n      fetchMyRequests();\n    } catch (error) {\n      console.error(\"Error submitting leave request:\", error);\n      setMessage(\n        error.response?.data?.error || \"Failed to submit leave request\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"Approved\":\n        return \"text-green-600 bg-green-100\";\n      case \"Rejected\":\n        return \"text-red-600 bg-red-100\";\n      case \"manager_approved\":\n        return \"text-blue-600 bg-blue-100\";\n      case \"pending_manager_approval\":\n        return \"text-yellow-600 bg-yellow-100\";\n      default:\n        return \"text-gray-600 bg-gray-100\";\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return \"-\";\n    try {\n      return format(new Date(dateString), \"MMM dd, yyyy\");\n    } catch (error) {\n      console.error(\"Error formatting date:\", dateString, error);\n      return \"-\";\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"flex items-center text-gray-600 hover:text-gray-800 transition-colors duration-200 mr-4\"\n            >\n              <FaArrowLeft className=\"w-4 h-4 mr-2\" />\n              Back\n            </button>\n            <h2 className=\"text-2xl font-bold text-gray-800\">\n              Leave Request Form\n            </h2>\n          </div>\n        </div>\n      </div>\n\n      {/* Two Column Layout */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Left Side - Leave Balance */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          {leaveBalance ? (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">\n                Your Leave Balance\n              </h3>\n              <div className=\"grid grid-cols-3 gap-4 text-center mb-6\">\n                <div>\n                  <p className=\"text-2xl font-bold text-blue-600\">\n                    {leaveBalance.total_allocated}\n                  </p>\n                  <p className=\"text-sm text-blue-600\">Total Allocated</p>\n                </div>\n                <div>\n                  <p className=\"text-2xl font-bold text-orange-600\">\n                    {leaveBalance.leaves_taken}\n                  </p>\n                  <p className=\"text-sm text-orange-600\">Leaves Taken</p>\n                </div>\n                <div>\n                  <p className=\"text-2xl font-bold text-green-600\">\n                    {leaveBalance.leaves_remaining}\n                  </p>\n                  <p className=\"text-sm text-green-600\">Remaining</p>\n                </div>\n              </div>\n\n              {/* Detailed Leave Type Balances */}\n              <div className=\"pt-4 border-t border-blue-200\">\n                <h4 className=\"text-sm font-semibold text-blue-700 mb-3\">\n                  Leave Type Breakdown:\n                </h4>\n                <div className=\"space-y-3\">\n                  {leaveTypeBalances.map((balance, index) => (\n                    <div\n                      key={index}\n                      className=\"bg-white rounded-lg p-3 border border-blue-100\"\n                    >\n                      <h5 className=\"text-sm font-semibold text-blue-800 mb-2\">\n                        {balance.leave_type}\n                      </h5>\n                      <div className=\"space-y-1 text-xs\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Allocated:</span>\n                          <span className=\"font-semibold text-blue-600\">\n                            {balance.total_allocated}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Taken:</span>\n                          <span className=\"font-semibold text-orange-600\">\n                            {balance.leaves_taken}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Remaining:</span>\n                          <span className=\"font-semibold text-green-600\">\n                            {balance.leaves_remaining}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ) : null}\n        </div>\n\n        {/* Right Side - Leave Request Form */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-6\">\n            Submit Leave Request\n          </h3>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Leave Type *\n                </label>\n                <select\n                  name=\"leaveType\"\n                  value={formData.leaveType}\n                  onChange={handleInputChange}\n                  required\n                  disabled={leaveTypes.length === 0}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed\"\n                >\n                  <option value=\"\">\n                    {leaveTypes.length === 0\n                      ? \"Loading leave types...\"\n                      : \"Select Leave Type\"}\n                  </option>\n                  {leaveTypes.map((type) => (\n                    <option key={type.id} value={type.type_name}>\n                      {type.type_name}\n                    </option>\n                  ))}\n                </select>\n                {formData.leaveType && (\n                  <div className=\"mt-2\">\n                    <div className=\"flex items-center mb-1\">\n                      {leaveTypes.find(\n                        (t) => t.type_name === formData.leaveType\n                      )?.color && (\n                        <div\n                          className=\"w-4 h-4 rounded-full mr-2\"\n                          style={{\n                            backgroundColor: leaveTypes.find(\n                              (t) => t.type_name === formData.leaveType\n                            )?.color,\n                          }}\n                        ></div>\n                      )}\n                      <span className=\"text-sm text-gray-600\">\n                        {\n                          leaveTypes.find(\n                            (t) => t.type_name === formData.leaveType\n                          )?.description\n                        }\n                      </span>\n                    </div>\n                    {leaveTypes.find((t) => t.type_name === formData.leaveType)\n                      ?.max_days && (\n                      <div className=\"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded\">\n                        Maximum allowed:{\" \"}\n                        {\n                          leaveTypes.find(\n                            (t) => t.type_name === formData.leaveType\n                          )?.max_days\n                        }{\" \"}\n                        days per year\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {systemSettings?.allow_half_day && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Half Day\n                  </label>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      name=\"halfDay\"\n                      checked={formData.halfDay}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 text-sm text-gray-700\">\n                      Check if this is a half-day leave\n                    </label>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  From Date *\n                </label>\n                <input\n                  type=\"date\"\n                  name=\"fromDate\"\n                  value={formData.fromDate}\n                  onChange={handleInputChange}\n                  required\n                  min={new Date().toISOString().split(\"T\")[0]}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  To Date (Optional)\n                </label>\n                <input\n                  type=\"date\"\n                  name=\"toDate\"\n                  value={formData.toDate}\n                  onChange={handleInputChange}\n                  min={\n                    formData.fromDate || new Date().toISOString().split(\"T\")[0]\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Leave empty for single day leave\n                </p>\n              </div>\n            </div>\n\n            {formData.fromDate && (\n              <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                <p className=\"text-sm text-gray-600\">\n                  <strong>Total Leave Days:</strong> {calculateTotalDays()}{\" \"}\n                  {calculateTotalDays() === 1 ? \"day\" : \"days\"}\n                  {formData.halfDay && \" (including half-day adjustment)\"}\n                  {!formData.toDate && \" - Single day leave\"}\n                </p>\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Reason *\n              </label>\n              <textarea\n                name=\"reason\"\n                value={formData.reason}\n                onChange={handleInputChange}\n                required\n                rows={4}\n                placeholder=\"Please provide a detailed reason for your leave request...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n\n            {message && (\n              <div\n                className={`p-4 rounded-lg ${\n                  message.includes(\"successfully\")\n                    ? \"bg-green-100 text-green-700 border border-green-200\"\n                    : \"bg-red-100 text-red-700 border border-red-200\"\n                }`}\n              >\n                {message}\n              </div>\n            )}\n\n            <div className=\"flex justify-end\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                {loading ? \"Submitting...\" : \"Submit Leave Request\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* My Leave Requests History */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        <h3 className=\"text-xl font-bold text-gray-800 mb-4\">\n          My Leave Requests\n        </h3>\n\n        {myRequests.length === 0 ? (\n          <p className=\"text-gray-500 text-center py-8\">\n            No leave requests found.\n          </p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    From\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    To\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Days\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Manager\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Submitted\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {myRequests.map((request) => (\n                  <tr key={request.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        {leaveTypes.find(\n                          (t) => t.type_name === request.leave_type\n                        )?.color && (\n                          <div\n                            className=\"w-3 h-3 rounded-full mr-2\"\n                            style={{\n                              backgroundColor: leaveTypes.find(\n                                (t) => t.type_name === request.leave_type\n                              )?.color,\n                            }}\n                          ></div>\n                        )}\n                        <span className=\"text-sm text-gray-900\">\n                          {request.leave_type}\n                        </span>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatDate(request.from_date)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {request.to_date ? formatDate(request.to_date) : \"-\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {request.total_leave_days}\n                      {request.half_day && \" (Â½ day)\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex flex-wrap gap-1\">\n                        {request.manager1_name && (\n                          <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800\">\n                            {request.manager1_name}\n                          </span>\n                        )}\n                        {request.manager2_name && (\n                          <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\n                            {request.manager2_name}\n                          </span>\n                        )}\n                        {request.manager3_name && (\n                          <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800\">\n                            {request.manager3_name}\n                          </span>\n                        )}\n                        {!request.manager1_name &&\n                          !request.manager2_name &&\n                          !request.manager3_name && (\n                            <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-600\">\n                              Not Assigned\n                            </span>\n                          )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span\n                        className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(\n                          request.status\n                        )}`}\n                      >\n                        {request.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {formatDate(request.created_at)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default EmployeeLeaveRequest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}