{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import axios from\"axios\";import toast from\"react-hot-toast\";import{FaEye}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HRExpenseManagement=()=>{const{user}=useAuth();const[expenses,setExpenses]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const[processingId,setProcessingId]=useState(null);const[activeTab,setActiveTab]=useState(\"pending\");const[selectedExpense,setSelectedExpense]=useState(null);const[showDetailsModal,setShowDetailsModal]=useState(false);useEffect(()=>{fetchExpenses();},[activeTab]);const fetchExpenses=async()=>{try{const endpoint=activeTab===\"pending\"?\"/expenses/hr/pending\":\"/expenses/all\";const response=await axios.get(endpoint);setExpenses(response.data);}catch(error){console.error(\"Error fetching expenses:\",error);setError(\"Failed to fetch expense requests\");}finally{setLoading(false);}};const handleApproval=async function(expenseId,action){let notes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"\";setProcessingId(expenseId);try{const response=await axios.put(\"/expenses/hr/\".concat(expenseId,\"/approve\"),{action,notes},{timeout:20000// 20 second timeout for expense approval\n});if(response.status===200){// Show success message\nconst actionText=action===\"approve\"?\"approved\":\"rejected\";toast.success(\"Expense request \".concat(actionText,\" successfully!\"),{duration:4000,position:\"top-right\"});// Remove the processed expense from pending list\nif(activeTab===\"pending\"){setExpenses(expenses.filter(expense=>expense.id!==expenseId));}else{// Refresh all expenses\nfetchExpenses();}setError(\"\");}}catch(error){var _error$response,_error$response$data;console.error(\"Error \".concat(action,\"ing expense:\"),error);let errorMessage=\"Failed to \".concat(action,\" expense request\");if(error.code===\"ECONNABORTED\"){errorMessage=\"Request timed out. Please try again. The \".concat(action,\" operation may still have been processed.\");}else if((_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.error){errorMessage=error.response.data.error;}else if(error.message){errorMessage=error.message;}setError(errorMessage);toast.error(errorMessage,{duration:5000,position:\"top-right\"});}finally{setProcessingId(null);}};const handleViewDetails=expense=>{setSelectedExpense(expense);setShowDetailsModal(true);};const handleDelete=async expenseId=>{if(!window.confirm(\"Are you sure you want to delete this expense request? This action cannot be undone.\")){return;}setProcessingId(expenseId);try{const response=await axios.delete(\"/expenses/\".concat(expenseId));if(response.status===200){toast.success(\"Expense request deleted successfully!\",{duration:4000,position:\"top-right\"});// Remove the deleted expense from the list\nsetExpenses(expenses.filter(expense=>expense.id!==expenseId));setError(\"\");}}catch(error){var _error$response2,_error$response2$data;console.error(\"Error deleting expense:\",error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||\"Failed to delete expense request\";setError(errorMessage);toast.error(errorMessage,{duration:5000,position:\"top-right\"});}finally{setProcessingId(null);}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"short\",day:\"numeric\"});};const formatCurrency=(amount,currency)=>{return new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:currency}).format(amount);};const getStatusColor=status=>{switch(status.toLowerCase()){case\"approved\":return\"bg-green-100 text-green-800\";case\"rejected\":return\"bg-red-100 text-red-800\";case\"pending_manager_approval\":return\"bg-yellow-100 text-yellow-800\";case\"manager_approved\":return\"bg-blue-100 text-blue-800\";default:return\"bg-gray-100 text-gray-800\";}};const getStatusText=status=>{switch(status.toLowerCase()){case\"approved\":return\"Approved\";case\"rejected\":return\"Rejected\";case\"pending_manager_approval\":return\"Pending for Manager Approval\";case\"manager_approved\":return\"Manager Approved - Pending HR\";default:return status;}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"Expense Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Review and manage all expense requests in the system.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"pending\"),className:\"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab===\"pending\"?\"border-blue-500 text-blue-600\":\"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"),children:\"Pending HR Approval\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"all\"),className:\"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab===\"all\"?\"border-blue-500 text-blue-600\":\"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"),children:\"All Expenses\"})]})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\",children:error}),expenses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:activeTab===\"pending\"?\"âœ…\":\"ðŸ“„\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:activeTab===\"pending\"?\"No pending expense requests\":\"No expense requests found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:activeTab===\"pending\"?\"All expense requests have been processed.\":\"No expense requests have been submitted yet.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[activeTab===\"pending\"&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:[expense.expense_category,\" - \",expense.expense_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Series: \",expense.series]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:formatCurrency(expense.amount,expense.currency)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:formatDate(expense.expense_date)}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(getStatusColor(expense.status)),children:getStatusText(expense.status)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Employee Details\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",expense.employee_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",expense.employee_email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Submitted:\"}),\" \",formatDate(expense.created_at)]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Expense Details\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",expense.expense_category]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",expense.expense_type]}),expense.project_reference&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Project:\"}),\" \",expense.project_reference]}),expense.payment_mode&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Mode:\"}),\" \",expense.payment_mode]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 bg-gray-50 p-3 rounded\",children:expense.description})]}),expense.manager_approval_status&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Manager Approval Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 bg-blue-50 p-3 rounded\",children:expense.manager_approval_status})]}),expense.hr_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"HR Approval\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approved by:\"}),\" \",expense.hr_name,\" on\",\" \",formatDate(expense.hr_approved_at)]}),expense.hr_approval_notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"}),\" \",expense.hr_approval_notes]})]}),expense.attachment_url&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Attachment\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"http://localhost:5001\".concat(expense.attachment_url),target:\"_blank\",rel:\"noopener noreferrer\",className:\"inline-flex items-center text-sm text-blue-600 hover:text-blue-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"})}),\"View \",expense.attachment_name]})]}),activeTab===\"pending\"&&expense.status===\"manager_approved\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{const notes=prompt(\"Add approval notes (optional):\");handleApproval(expense.id,\"approve\",notes||\"\");},disabled:processingId===expense.id,className:\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",children:[processingId===expense.id&&/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),processingId===expense.id?\"Processing...\":\"Approve\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{const notes=prompt(\"Add rejection notes (optional):\");handleApproval(expense.id,\"reject\",notes||\"\");},disabled:processingId===expense.id,className:\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",children:[processingId===expense.id&&/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),processingId===expense.id?\"Processing...\":\"Reject\"]})]})]},expense.id))}),activeTab===\"all\"&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Expense Details\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:expense.employee_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:expense.employee_email})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[expense.expense_category,\" -\",\" \",expense.expense_type]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Series: \",expense.series]}),expense.project_reference&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Project: \",expense.project_reference]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:formatCurrency(expense.amount,expense.currency)})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:formatDate(expense.expense_date)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Submitted: \",formatDate(expense.created_at)]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(getStatusColor(expense.status)),children:getStatusText(expense.status)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewDetails(expense),className:\"text-blue-600 hover:text-blue-900 p-1 rounded\",title:\"View Details\",children:/*#__PURE__*/_jsx(FaEye,{className:\"h-4 w-4\"})})})]},expense.id))})]})})})]}),showDetailsModal&&selectedExpense&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:[\"Expense Details - \",selectedExpense.expense_category,\" -\",\" \",selectedExpense.expense_type]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailsModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Employee Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",selectedExpense.employee_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",selectedExpense.employee_email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Submitted:\"}),\" \",formatDate(selectedExpense.created_at)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Expense Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",selectedExpense.expense_category]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",selectedExpense.expense_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" \",formatCurrency(selectedExpense.amount,selectedExpense.currency)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",formatDate(selectedExpense.expense_date)]}),selectedExpense.project_reference&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Project:\"}),\" \",selectedExpense.project_reference]}),selectedExpense.payment_mode&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Mode:\"}),\" \",selectedExpense.payment_mode]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 bg-gray-50 p-3 rounded\",children:selectedExpense.description})]}),selectedExpense.manager_approval_status&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Manager Approval Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 bg-blue-50 p-3 rounded\",children:selectedExpense.manager_approval_status})]}),selectedExpense.hr_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"HR Approval\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approved by:\"}),\" \",selectedExpense.hr_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approved on:\"}),\" \",formatDate(selectedExpense.hr_approved_at)]}),selectedExpense.hr_approval_notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"}),\" \",selectedExpense.hr_approval_notes]})]})]}),selectedExpense.attachment_url&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Attachment\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"http://localhost:5001\".concat(selectedExpense.attachment_url),target:\"_blank\",rel:\"noopener noreferrer\",className:\"inline-flex items-center text-sm text-blue-600 hover:text-blue-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"})}),\"View \",selectedExpense.attachment_name]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailsModal(false),className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\",children:\"Close\"})})]})})})]});};export default HRExpenseManagement;","map":{"version":3,"names":["React","useState","useEffect","useAuth","axios","toast","FaEye","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HRExpenseManagement","user","expenses","setExpenses","loading","setLoading","error","setError","processingId","setProcessingId","activeTab","setActiveTab","selectedExpense","setSelectedExpense","showDetailsModal","setShowDetailsModal","fetchExpenses","endpoint","response","get","data","console","handleApproval","expenseId","action","notes","arguments","length","undefined","put","concat","timeout","status","actionText","success","duration","position","filter","expense","id","_error$response","_error$response$data","errorMessage","code","message","handleViewDetails","handleDelete","window","confirm","delete","_error$response2","_error$response2$data","formatDate","dateString","Date","toLocaleDateString","year","month","day","formatCurrency","amount","currency","Intl","NumberFormat","style","format","getStatusColor","toLowerCase","getStatusText","className","children","onClick","map","expense_category","expense_type","series","expense_date","employee_name","employee_email","created_at","project_reference","payment_mode","description","manager_approval_status","hr_name","hr_approved_at","hr_approval_notes","attachment_url","href","target","rel","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","attachment_name","prompt","disabled","xmlns","cx","cy","r","title"],"sources":["/Users/stalin_j/Downloads/test2/onboard/frontend/src/components/HRExpenseManagement.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { FaEye } from \"react-icons/fa\";\n\nconst HRExpenseManagement = () => {\n  const { user } = useAuth();\n  const [expenses, setExpenses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [processingId, setProcessingId] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"pending\");\n  const [selectedExpense, setSelectedExpense] = useState(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n\n  useEffect(() => {\n    fetchExpenses();\n  }, [activeTab]);\n\n  const fetchExpenses = async () => {\n    try {\n      const endpoint =\n        activeTab === \"pending\" ? \"/expenses/hr/pending\" : \"/expenses/all\";\n      const response = await axios.get(endpoint);\n      setExpenses(response.data);\n    } catch (error) {\n      console.error(\"Error fetching expenses:\", error);\n      setError(\"Failed to fetch expense requests\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleApproval = async (expenseId, action, notes = \"\") => {\n    setProcessingId(expenseId);\n    try {\n      const response = await axios.put(\n        `/expenses/hr/${expenseId}/approve`,\n        {\n          action,\n          notes,\n        },\n        {\n          timeout: 20000, // 20 second timeout for expense approval\n        }\n      );\n\n      if (response.status === 200) {\n        // Show success message\n        const actionText = action === \"approve\" ? \"approved\" : \"rejected\";\n        toast.success(`Expense request ${actionText} successfully!`, {\n          duration: 4000,\n          position: \"top-right\",\n        });\n\n        // Remove the processed expense from pending list\n        if (activeTab === \"pending\") {\n          setExpenses(expenses.filter((expense) => expense.id !== expenseId));\n        } else {\n          // Refresh all expenses\n          fetchExpenses();\n        }\n        setError(\"\");\n      }\n    } catch (error) {\n      console.error(`Error ${action}ing expense:`, error);\n\n      let errorMessage = `Failed to ${action} expense request`;\n\n      if (error.code === \"ECONNABORTED\") {\n        errorMessage = `Request timed out. Please try again. The ${action} operation may still have been processed.`;\n      } else if (error.response?.data?.error) {\n        errorMessage = error.response.data.error;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n\n      setError(errorMessage);\n      toast.error(errorMessage, {\n        duration: 5000,\n        position: \"top-right\",\n      });\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const handleViewDetails = (expense) => {\n    setSelectedExpense(expense);\n    setShowDetailsModal(true);\n  };\n\n  const handleDelete = async (expenseId) => {\n    if (\n      !window.confirm(\n        \"Are you sure you want to delete this expense request? This action cannot be undone.\"\n      )\n    ) {\n      return;\n    }\n\n    setProcessingId(expenseId);\n    try {\n      const response = await axios.delete(`/expenses/${expenseId}`);\n\n      if (response.status === 200) {\n        toast.success(\"Expense request deleted successfully!\", {\n          duration: 4000,\n          position: \"top-right\",\n        });\n\n        // Remove the deleted expense from the list\n        setExpenses(expenses.filter((expense) => expense.id !== expenseId));\n        setError(\"\");\n      }\n    } catch (error) {\n      console.error(\"Error deleting expense:\", error);\n      const errorMessage =\n        error.response?.data?.error || \"Failed to delete expense request\";\n      setError(errorMessage);\n      toast.error(errorMessage, {\n        duration: 5000,\n        position: \"top-right\",\n      });\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  };\n\n  const formatCurrency = (amount, currency) => {\n    return new Intl.NumberFormat(\"en-IN\", {\n      style: \"currency\",\n      currency: currency,\n    }).format(amount);\n  };\n\n  const getStatusColor = (status) => {\n    switch (status.toLowerCase()) {\n      case \"approved\":\n        return \"bg-green-100 text-green-800\";\n      case \"rejected\":\n        return \"bg-red-100 text-red-800\";\n      case \"pending_manager_approval\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"manager_approved\":\n        return \"bg-blue-100 text-blue-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusText = (status) => {\n    switch (status.toLowerCase()) {\n      case \"approved\":\n        return \"Approved\";\n      case \"rejected\":\n        return \"Rejected\";\n      case \"pending_manager_approval\":\n        return \"Pending for Manager Approval\";\n      case \"manager_approved\":\n        return \"Manager Approved - Pending HR\";\n      default:\n        return status;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">\n          Expense Management\n        </h2>\n        <p className=\"text-gray-600\">\n          Review and manage all expense requests in the system.\n        </p>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"mb-6\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab(\"pending\")}\n              className={`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === \"pending\"\n                  ? \"border-blue-500 text-blue-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              }`}\n            >\n              Pending HR Approval\n            </button>\n            <button\n              onClick={() => setActiveTab(\"all\")}\n              className={`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === \"all\"\n                  ? \"border-blue-500 text-blue-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              }`}\n            >\n              All Expenses\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\">\n          {error}\n        </div>\n      )}\n\n      {expenses.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"text-gray-400 text-6xl mb-4\">\n            {activeTab === \"pending\" ? \"âœ…\" : \"ðŸ“„\"}\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            {activeTab === \"pending\"\n              ? \"No pending expense requests\"\n              : \"No expense requests found\"}\n          </h3>\n          <p className=\"text-gray-500\">\n            {activeTab === \"pending\"\n              ? \"All expense requests have been processed.\"\n              : \"No expense requests have been submitted yet.\"}\n          </p>\n        </div>\n      ) : (\n        <>\n          {/* Pending HR Approval - Card View */}\n          {activeTab === \"pending\" && (\n            <div className=\"space-y-6\">\n              {expenses.map((expense) => (\n                <div\n                  key={expense.id}\n                  className=\"bg-white shadow rounded-lg p-6\"\n                >\n                  <div className=\"flex justify-between items-start mb-4\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900\">\n                        {expense.expense_category} - {expense.expense_type}\n                      </h3>\n                      <p className=\"text-sm text-gray-500\">\n                        Series: {expense.series}\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-xl font-bold text-gray-900\">\n                        {formatCurrency(expense.amount, expense.currency)}\n                      </p>\n                      <p className=\"text-sm text-gray-500\">\n                        {formatDate(expense.expense_date)}\n                      </p>\n                      <span\n                        className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(\n                          expense.status\n                        )}`}\n                      >\n                        {getStatusText(expense.status)}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <h4 className=\"font-medium text-gray-700 mb-2\">\n                        Employee Details\n                      </h4>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Name:</strong> {expense.employee_name}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Email:</strong> {expense.employee_email}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Submitted:</strong>{\" \"}\n                        {formatDate(expense.created_at)}\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium text-gray-700 mb-2\">\n                        Expense Details\n                      </h4>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Category:</strong> {expense.expense_category}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Type:</strong> {expense.expense_type}\n                      </p>\n                      {expense.project_reference && (\n                        <p className=\"text-sm text-gray-600\">\n                          <strong>Project:</strong> {expense.project_reference}\n                        </p>\n                      )}\n                      {expense.payment_mode && (\n                        <p className=\"text-sm text-gray-600\">\n                          <strong>Payment Mode:</strong> {expense.payment_mode}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 mb-2\">\n                      Description\n                    </h4>\n                    <p className=\"text-sm text-gray-600 bg-gray-50 p-3 rounded\">\n                      {expense.description}\n                    </p>\n                  </div>\n\n                  {/* Manager Approval Status */}\n                  {expense.manager_approval_status && (\n                    <div className=\"mb-4\">\n                      <h4 className=\"font-medium text-gray-700 mb-2\">\n                        Manager Approval Status\n                      </h4>\n                      <p className=\"text-sm text-gray-600 bg-blue-50 p-3 rounded\">\n                        {expense.manager_approval_status}\n                      </p>\n                    </div>\n                  )}\n\n                  {/* HR Approval */}\n                  {expense.hr_name && (\n                    <div className=\"mb-4\">\n                      <h4 className=\"font-medium text-gray-700 mb-2\">\n                        HR Approval\n                      </h4>\n                      <p className=\"text-sm text-gray-600\">\n                        <strong>Approved by:</strong> {expense.hr_name} on{\" \"}\n                        {formatDate(expense.hr_approved_at)}\n                      </p>\n                      {expense.hr_approval_notes && (\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          <strong>Notes:</strong> {expense.hr_approval_notes}\n                        </p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Attachment */}\n                  {expense.attachment_url && (\n                    <div className=\"mb-4\">\n                      <h4 className=\"font-medium text-gray-700 mb-2\">\n                        Attachment\n                      </h4>\n                      <a\n                        href={`http://localhost:5001${expense.attachment_url}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\n                      >\n                        <svg\n                          className=\"w-4 h-4 mr-1\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n                          />\n                        </svg>\n                        View {expense.attachment_name}\n                      </a>\n                    </div>\n                  )}\n\n                  {/* Approval Actions - Only show for pending requests */}\n                  {activeTab === \"pending\" &&\n                    expense.status === \"manager_approved\" && (\n                      <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n                        <button\n                          onClick={() => {\n                            const notes = prompt(\n                              \"Add approval notes (optional):\"\n                            );\n                            handleApproval(expense.id, \"approve\", notes || \"\");\n                          }}\n                          disabled={processingId === expense.id}\n                          className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n                        >\n                          {processingId === expense.id && (\n                            <svg\n                              className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <circle\n                                className=\"opacity-25\"\n                                cx=\"12\"\n                                cy=\"12\"\n                                r=\"10\"\n                                stroke=\"currentColor\"\n                                strokeWidth=\"4\"\n                              ></circle>\n                              <path\n                                className=\"opacity-75\"\n                                fill=\"currentColor\"\n                                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                              ></path>\n                            </svg>\n                          )}\n                          {processingId === expense.id\n                            ? \"Processing...\"\n                            : \"Approve\"}\n                        </button>\n                        <button\n                          onClick={() => {\n                            const notes = prompt(\n                              \"Add rejection notes (optional):\"\n                            );\n                            handleApproval(expense.id, \"reject\", notes || \"\");\n                          }}\n                          disabled={processingId === expense.id}\n                          className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n                        >\n                          {processingId === expense.id && (\n                            <svg\n                              className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <circle\n                                className=\"opacity-25\"\n                                cx=\"12\"\n                                cy=\"12\"\n                                r=\"10\"\n                                stroke=\"currentColor\"\n                                strokeWidth=\"4\"\n                              ></circle>\n                              <path\n                                className=\"opacity-75\"\n                                fill=\"currentColor\"\n                                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                              ></path>\n                            </svg>\n                          )}\n                          {processingId === expense.id\n                            ? \"Processing...\"\n                            : \"Reject\"}\n                        </button>\n                      </div>\n                    )}\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* All Expenses - Table View */}\n          {activeTab === \"all\" && (\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Employee\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Expense Details\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Amount\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Date\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {expenses.map((expense) => (\n                      <tr key={expense.id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {expense.employee_name}\n                            </div>\n                            <div className=\"text-sm text-gray-500\">\n                              {expense.employee_email}\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {expense.expense_category} -{\" \"}\n                              {expense.expense_type}\n                            </div>\n                            <div className=\"text-sm text-gray-500\">\n                              Series: {expense.series}\n                            </div>\n                            {expense.project_reference && (\n                              <div className=\"text-sm text-gray-500\">\n                                Project: {expense.project_reference}\n                              </div>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {formatCurrency(expense.amount, expense.currency)}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-gray-900\">\n                            {formatDate(expense.expense_date)}\n                          </div>\n                          <div className=\"text-sm text-gray-500\">\n                            Submitted: {formatDate(expense.created_at)}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span\n                            className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(\n                              expense.status\n                            )}`}\n                          >\n                            {getStatusText(expense.status)}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                          <button\n                            onClick={() => handleViewDetails(expense)}\n                            className=\"text-blue-600 hover:text-blue-900 p-1 rounded\"\n                            title=\"View Details\"\n                          >\n                            <FaEye className=\"h-4 w-4\" />\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Expense Details Modal */}\n      {showDetailsModal && selectedExpense && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Expense Details - {selectedExpense.expense_category} -{\" \"}\n                  {selectedExpense.expense_type}\n                </h3>\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <svg\n                    className=\"w-6 h-6\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-medium text-gray-700 mb-3\">\n                    Employee Details\n                  </h4>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm\">\n                      <strong>Name:</strong> {selectedExpense.employee_name}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Email:</strong> {selectedExpense.employee_email}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Submitted:</strong>{\" \"}\n                      {formatDate(selectedExpense.created_at)}\n                    </p>\n                  </div>\n                </div>\n\n                <div>\n                  <h4 className=\"font-medium text-gray-700 mb-3\">\n                    Expense Details\n                  </h4>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm\">\n                      <strong>Category:</strong>{\" \"}\n                      {selectedExpense.expense_category}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Type:</strong> {selectedExpense.expense_type}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Amount:</strong>{\" \"}\n                      {formatCurrency(\n                        selectedExpense.amount,\n                        selectedExpense.currency\n                      )}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Date:</strong>{\" \"}\n                      {formatDate(selectedExpense.expense_date)}\n                    </p>\n                    {selectedExpense.project_reference && (\n                      <p className=\"text-sm\">\n                        <strong>Project:</strong>{\" \"}\n                        {selectedExpense.project_reference}\n                      </p>\n                    )}\n                    {selectedExpense.payment_mode && (\n                      <p className=\"text-sm\">\n                        <strong>Payment Mode:</strong>{\" \"}\n                        {selectedExpense.payment_mode}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6\">\n                <h4 className=\"font-medium text-gray-700 mb-3\">Description</h4>\n                <p className=\"text-sm text-gray-600 bg-gray-50 p-3 rounded\">\n                  {selectedExpense.description}\n                </p>\n              </div>\n\n              {selectedExpense.manager_approval_status && (\n                <div className=\"mt-6\">\n                  <h4 className=\"font-medium text-gray-700 mb-3\">\n                    Manager Approval Status\n                  </h4>\n                  <p className=\"text-sm text-gray-600 bg-blue-50 p-3 rounded\">\n                    {selectedExpense.manager_approval_status}\n                  </p>\n                </div>\n              )}\n\n              {selectedExpense.hr_name && (\n                <div className=\"mt-6\">\n                  <h4 className=\"font-medium text-gray-700 mb-3\">\n                    HR Approval\n                  </h4>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm\">\n                      <strong>Approved by:</strong> {selectedExpense.hr_name}\n                    </p>\n                    <p className=\"text-sm\">\n                      <strong>Approved on:</strong>{\" \"}\n                      {formatDate(selectedExpense.hr_approved_at)}\n                    </p>\n                    {selectedExpense.hr_approval_notes && (\n                      <p className=\"text-sm\">\n                        <strong>Notes:</strong>{\" \"}\n                        {selectedExpense.hr_approval_notes}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {selectedExpense.attachment_url && (\n                <div className=\"mt-6\">\n                  <h4 className=\"font-medium text-gray-700 mb-3\">Attachment</h4>\n                  <a\n                    href={`http://localhost:5001${selectedExpense.attachment_url}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\n                  >\n                    <svg\n                      className=\"w-4 h-4 mr-1\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n                      />\n                    </svg>\n                    View {selectedExpense.attachment_name}\n                  </a>\n                </div>\n              )}\n\n              <div className=\"mt-6 flex justify-end\">\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HRExpenseManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}